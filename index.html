<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–¢–∞–π–º–µ—Ä –¥–æ 1 –Ω–æ—è–±—Ä—è</title>
  <meta name="description" content="–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –¥–æ 1 –Ω–æ—è–±—Ä—è. –ß–∏—Å—Ç—ã–π HTML/CSS/JS, –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫." />
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121738;
      --muted: #a7b0d6;
      --text: #ecf0ff;
      --shadow: 0 20px 60px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.04);
      --radius: 22px;
      --accent: linear-gradient(135deg, #7c3aed, #06b6d4);
    }

    * { box-sizing: border-box }
    html, body { height: 100% }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% 10%, #111638 0%, #0b1020 45%, #090d19 100%);
      display: grid;
      place-items: center;
      padding: 32px 16px;
    }

    .wrap {
      width: min(1080px, 100%);
    }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      backdrop-filter: saturate(120%) blur(6px);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(18px, 3.8vw, 36px);
    }

    .title {
      margin: 0 0 8px;
      font-size: clamp(22px, 4vw, 40px);
      line-height: 1.15;
      letter-spacing: .2px;
      font-weight: 800;
      background: var(--accent);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      margin: 0 0 24px;
      color: var(--muted);
      font-size: clamp(14px, 1.8vw, 16px);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(120px, 1fr));
      gap: clamp(10px, 2.5vw, 18px);
    }

    .unit {
      background: var(--panel);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: calc(var(--radius) - 6px);
      padding: clamp(14px, 2.4vw, 22px);
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      isolation: isolate;
    }

    .unit::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(600px 200px at -10% -10%, rgba(124,58,237,.25), transparent 60%),
                  radial-gradient(600px 200px at 110% 110%, rgba(6,182,212,.25), transparent 60%);
      pointer-events: none;
      z-index: -1;
    }

    .value {
      font-variant-numeric: tabular-nums;
      font-size: clamp(42px, 8.2vw, 72px);
      line-height: 1;
      font-weight: 900;
      letter-spacing: .5px;
      margin: 0 0 10px;
      background: var(--accent);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 6px 26px rgba(124,58,237,.25);
    }

    .label {
      color: var(--muted);
      font-size: clamp(12px, 1.6vw, 14px);
      letter-spacing: .35px;
      text-transform: lowercase;
    }

    .hint {
      margin-top: 22px;
      color: var(--muted);
      font-size: 13px;
      opacity: .85;
    }

    .sr-only {
      position: absolute;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0);
      white-space: nowrap; border: 0;
    }

    @media (max-width: 600px) {
      .grid { grid-template-columns: repeat(2, 1fr); }
    }
      /* Canvas overlay for fireworks */
    #fx { position: fixed; inset: 0; pointer-events: none; z-index: 999; }
    /* Sound toggle button */
    .sound-toggle {
      position: fixed; right: 16px; bottom: 16px;
      z-index: 1000;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(18,23,56,.8);
      color: var(--text);
      backdrop-filter: blur(8px) saturate(120%);
      border-radius: 999px;
      padding: 10px 14px;
      font: inherit; font-weight: 700; letter-spacing: .2px;
      cursor: pointer;
      box-shadow: var(--shadow);
    }
    .sound-toggle[aria-pressed="true"] { outline: 2px solid rgba(124,58,237,.6); }

    /* Canvas overlay for fireworks */
    #fx { position: fixed; inset: 0; pointer-events: none; z-index: 999; }
</style>
</head>
<body>
  <main class="wrap">
    <section class="card" aria-labelledby="timer-title">
      <h1 id="timer-title" class="title">–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –¥–æ 1&nbsp;–Ω–æ—è–±—Ä—è</h1>
      <p class="subtitle" id="timer-sub">–°—á–∏—Ç–∞–µ–º –¥–æ –ø–æ–ª—É–Ω–æ—á–∏ 1 –Ω–æ—è–±—Ä—è –±–ª–∏–∂–∞–π—à–µ–≥–æ –≥–æ–¥–∞ (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞).</p>

      <!--
        –•–æ—Ç–∏—Ç–µ –∂—ë—Å—Ç–∫–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≥–æ–¥/–¥–∞—Ç—É? 
        –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ data-–∞—Ç—Ä–∏–±—É—Ç –Ω–∏–∂–µ –∏ —É–∫–∞–∂–∏—Ç–µ ISO-–¥–∞—Ç—É: YYYY-MM-DDTHH:mm:ss
        <div class="grid" id="timer" data-target="2025-11-01T00:00:00"></div>
      -->

      <div class="grid" id="timer" role="group" aria-label="–¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞">
        <article class="unit" aria-live="off"><div class="value" id="d">0</div><div class="label" id="dl">–¥–Ω–µ–π</div></article>
        <article class="unit" aria-live="off"><div class="value" id="h">0</div><div class="label" id="hl">—á–∞—Å–æ–≤</div></article>
        <article class="unit" aria-live="off"><div class="value" id="m">0</div><div class="label" id="ml">–º–∏–Ω—É—Ç</div></article>
        <article class="unit" aria-live="off"><div class="value" id="s">0</div><div class="label" id="sl">—Å–µ–∫—É–Ω–¥</div></article>
      </div>

      <p class="hint">–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π HTML/CSS/JS. –î–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –¥–∞—Ç—ã –∑–∞–¥–∞–π—Ç–µ <code>data-target</code> –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å id <code>timer</code>.</p>

      <div id="a11y" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    </section>
  </main>
    <!-- Fireworks canvas overlay -->
    <canvas id="fx" aria-hidden="true"></canvas>
    <button id="soundToggle" class="sound-toggle" aria-pressed="false" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞">üîà –ó–≤—É–∫: –≤—ã–∫–ª</button>

  <script>
    /* ===== Fireworks engine (vanilla JS + canvas) ===== */
    class Fireworks {
      constructor(canvas) {
        this.canvas = canvas;
        this.ctx = canvas.getContext('2d');
        this.dpr = Math.max(1, window.devicePixelRatio || 1);
        this.particles = [];
        this.enabled = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        this.resize();
        this.loop = this.loop.bind(this);
        window.addEventListener('resize', () => this.resize());
        requestAnimationFrame(this.loop);
      }
      resize() {
        const w = window.innerWidth, h = window.innerHeight;
        this.canvas.width = Math.floor(w * this.dpr);
        this.canvas.height = Math.floor(h * this.dpr);
        this.canvas.style.width = w + 'px';
        this.canvas.style.height = h + 'px';
        this.w = this.canvas.width; this.h = this.canvas.height;
      }
      burstAt(x, y, count = 80, power = 6) {
        if (!this.enabled) return;
        const baseHue = Math.random() * 360;
        for (let i = 0; i < count; i++) {
          const a = Math.random() * Math.PI * 2;
          const speed = (0.4 + Math.random() * 0.6) * power;
          const vx = Math.cos(a) * speed;
          const vy = Math.sin(a) * speed;
          this.particles.push({
            x: x * this.dpr, y: y * this.dpr,
            vx, vy,
            life: 0,
            ttl: 60 + Math.random() * 30,
            size: 2 + Math.random() * 2,
            hue: baseHue + Math.random() * 30
          });
        }
      }
      burstRandom(n = 4) {
        for (let i = 0; i < n; i++) {
          this.burstAt(Math.random() * window.innerWidth,
                       Math.random() * window.innerHeight * 0.6 + window.innerHeight * 0.1,
                       90,
                       6 + Math.random() * 3);
        }
      }
      finale() {
        if (!this.enabled) return;
        const bursts = 12;
        for (let i = 0; i < bursts; i++) {
          setTimeout(() => this.burstRandom(3), i * 120);
        }
      }
      loop() {
        const ctx = this.ctx;
        const g = 0.06; // gravity
        const fr = 0.985; // friction
        ctx.clearRect(0, 0, this.w, this.h);
        for (let i = this.particles.length - 1; i >= 0; i--) {
          const p = this.particles[i];
          p.life++;
          p.vy += g;
          p.vx *= fr; p.vy *= fr;
          p.x += p.vx; p.y += p.vy;
          const alpha = 1 - p.life / p.ttl;
          if (alpha <= 0) { this.particles.splice(i, 1); continue; }
          ctx.globalAlpha = alpha;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fillStyle = `hsl(${p.hue}, 100%, 60%)`;
          ctx.fill();
        }
        ctx.globalAlpha = 1;
        requestAnimationFrame(this.loop);
      }
    }
    /* ===== End fireworks engine ===== */

    /* ===== Simple WebAudio SFX for fireworks ===== */
    class SoundFX {
      constructor() {
        this.enabled = false;
        this.ctx = null;
        this.master = null;
        this.noiseBuffer = null;
      }
      _ensure() {
        if (this.ctx) return true;
        const AC = window.AudioContext || window.webkitAudioContext;
        if (!AC) return false;
        this.ctx = new AC();
        this.master = this.ctx.createGain();
        this.master.gain.value = 0.28; // –æ–±—â–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å
        this.master.connect(this.ctx.destination);
        // –®—É–º–æ–≤–æ–π –±—É—Ñ–µ—Ä (1 —Å–µ–∫—É–Ω–¥–∞ –±–µ–ª–æ–≥–æ —à—É–º–∞)
        const len = this.ctx.sampleRate;
        const buf = this.ctx.createBuffer(1, len, this.ctx.sampleRate);
        const data = buf.getChannelData(0);
        for (let i = 0; i < len; i++) data[i] = Math.random() * 2 - 1;
        this.noiseBuffer = buf;
        return true;
      }
      enable(flag = true) {
        if (flag) {
          if (!this._ensure()) return;
          if (this.ctx.state === 'suspended') this.ctx.resume();
        }
        this.enabled = flag;
      }
      toggle() { this.enable(!this.enabled); return this.enabled; }
      noise(duration = 0.5, freq = 1000, type = 'bandpass', startGain = 1.0) {
        if (!this.enabled || !this._ensure()) return;
        const ctx = this.ctx;
        const src = ctx.createBufferSource();
        src.buffer = this.noiseBuffer;
        const filter = ctx.createBiquadFilter();
        filter.type = type;
        filter.frequency.value = freq;
        filter.Q.value = 0.9;
        const gain = ctx.createGain();
        const now = ctx.currentTime;
        gain.gain.setValueAtTime(Math.max(0.001, startGain), now);
        gain.gain.exponentialRampToValueAtTime(0.001, now + duration);
        src.connect(filter); filter.connect(gain); gain.connect(this.master);
        src.start();
        src.stop(now + duration);
      }
      boom() {
        // –Ω–∏–∑–∫–∏–π ¬´–±—É–º¬ª
        this.noise(0.55 + Math.random() * 0.2, 800, 'bandpass', 1.2);
        // —Ç—Ä–µ—Å–∫ –ø–æ—Å–ª–µ –≤–∑—Ä—ã–≤–∞
        for (let i = 0; i < 3; i++) {
          const t = 0.10 + i * 0.12 + Math.random() * 0.05;
          setTimeout(() => this.noise(0.08, 3500, 'bandpass', 0.6), t * 1000);
        }
      }
      firework() { this.boom(); }
      finale() {
        if (!this.enabled) return;
        for (let i = 0; i < 16; i++) setTimeout(() => this.boom(), i * 120);
      }
    }
    /* ===== End SFX ===== */

    // –†—É—Å—Å–∫–∞—è –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—è: –¥–µ–Ω—å/–¥–Ω—è/–¥–Ω–µ–π –∏ —Ç.–ø.
    function plural(n, one, few, many) {
      const mod10 = n % 10, mod100 = n % 100;
      if (mod10 === 1 && mod100 !== 11) return one;        // 1
      if (mod10 >= 2 && mod10 <= 4 && (mod100 < 12 || mod100 > 14)) return few; // 2-4
      return many; // 0, 5-20, 25-30, ...
    }

    function getTargetFromAttr() {
      const el = document.getElementById('timer');
      const attr = el.getAttribute('data-target');
      if (attr) {
        const parsed = new Date(attr);
        if (!isNaN(parsed)) return parsed;
      }
      const now = new Date();
      // –ú–µ—Å—è—Ü—ã –≤ JS —Å 0: –Ω–æ—è–±—Ä—å = 10. –û—Ç—Å—á—ë—Ç –¥–æ 1 –Ω–æ—è–±—Ä—è 00:00 –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
      let target = new Date(now.getFullYear(), 10, 1, 0, 0, 0, 0);
      if (now >= target) target.setFullYear(target.getFullYear() + 1);
      return target;
    }

    const target = getTargetFromAttr();
    const fx = new Fireworks(document.getElementById('fx'));
    const sfx = new SoundFX();
    let prevDays = null;
    let celebrationTimer = null;

    const soundBtn = document.getElementById('soundToggle');
    function refreshSoundBtn(){
      soundBtn.setAttribute('aria-pressed', sfx.enabled ? 'true' : 'false');
      soundBtn.textContent = sfx.enabled ? 'üîä –ó–≤—É–∫: –≤–∫–ª' : 'üîà –ó–≤—É–∫: –≤—ã–∫–ª';
    }
    soundBtn.addEventListener('click', () => { sfx.toggle(); refreshSoundBtn(); });
    refreshSoundBtn();
    const title = document.getElementById('timer-title');
    const sub = document.getElementById('timer-sub');

    function startCelebration(durationMs = 10000) {
      // —Å–µ—Ä–∏—è –∑–∞–ª–ø–æ–≤ ~durationMs, –∫–∞–∂–¥—ã–µ ~0.5—Å
      const end = Date.now() + durationMs;
      if (celebrationTimer) { clearInterval(celebrationTimer); celebrationTimer = null; }
      // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –∑–∞–ª–ø
      try { fx.burstRandom(3); sfx.firework(); } catch(_){}
      celebrationTimer = setInterval(() => {
        try { fx.burstRandom(2 + Math.floor(Math.random() * 2)); sfx.firework(); } catch(_){}
        if (Date.now() >= end) { clearInterval(celebrationTimer); celebrationTimer = null; }
      }, 550);
    }

    function update() {
      const now = new Date();
      let diff = target - now; // –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã

      if (diff <= 0) {
        // –î–æ—à–ª–∏! –§–∏–∫—Å–∏—Ä—É–µ–º 0 –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
        document.getElementById('d').textContent = '0';
        document.getElementById('h').textContent = '0';
        document.getElementById('m').textContent = '0';
        document.getElementById('s').textContent = '0';
        document.getElementById('dl').textContent = '–¥–Ω–µ–π';
        document.getElementById('hl').textContent = '—á–∞—Å–æ–≤';
        document.getElementById('ml').textContent = '–º–∏–Ω—É—Ç';
        document.getElementById('sl').textContent = '—Å–µ–∫—É–Ω–¥';
        title.textContent = '–° –Ω–∞—Å—Ç—É–ø–∏–≤—à–∏–º 1 –Ω–æ—è–±—Ä—è!';
        sub.textContent = '–ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –≥–æ–¥.';
        document.getElementById('a11y').textContent = '–û—Ç—Å—á—ë—Ç –∑–∞–≤–µ—Ä—à—ë–Ω: –Ω–∞—Å—Ç—É–ø–∏–ª–æ 1 –Ω–æ—è–±—Ä—è.';
        try { fx.finale(); sfx.finale(); } catch(_) {}
        return; // –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
      }

      const sec = Math.floor(diff / 1000);
      const days = Math.floor(sec / 86400);
      const hours = Math.floor((sec % 86400) / 3600);
      const mins = Math.floor((sec % 3600) / 60);
      const secs = sec % 60;

      // –ï—Å–ª–∏ —Å–º–µ–Ω–∏–ª–æ—Å—å —á–∏—Å–ª–æ –¥–Ω–µ–π ‚Äî –∑–∞–ø—É—Å—Ç–∏–º —Å–∞–ª—é—Ç
      if (prevDays === null) {
      prevDays = days;
      } else if (days !== prevDays) {
        startCelebration(10000); // ~10—Å —Å–∞–ª—é—Ç
        prevDays = days;
      }

      document.getElementById('d').textContent = String(days);
      document.getElementById('h').textContent = String(hours).padStart(2, '0');
      document.getElementById('m').textContent = String(mins).padStart(2, '0');
      document.getElementById('s').textContent = String(secs).padStart(2, '0');

      document.getElementById('dl').textContent = plural(days, '–¥–µ–Ω—å', '–¥–Ω—è', '–¥–Ω–µ–π');
      document.getElementById('hl').textContent = plural(hours, '—á–∞—Å', '—á–∞—Å–∞', '—á–∞—Å–æ–≤');
      document.getElementById('ml').textContent = plural(mins, '–º–∏–Ω—É—Ç–∞', '–º–∏–Ω—É—Ç—ã', '–º–∏–Ω—É—Ç');
      document.getElementById('sl').textContent = plural(secs, '—Å–µ–∫—É–Ω–¥–∞', '—Å–µ–∫—É–Ω–¥—ã', '—Å–µ–∫—É–Ω–¥');

      // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É / —Å–µ–∫—É–Ω–¥—É
      document.getElementById('a11y').textContent = `–û—Å—Ç–∞–ª–æ—Å—å ${days} ${plural(days,'–¥–µ–Ω—å','–¥–Ω—è','–¥–Ω–µ–π')}, ${hours} ${plural(hours,'—á–∞—Å','—á–∞—Å–∞','—á–∞—Å–æ–≤')}, ${mins} ${plural(mins,'–º–∏–Ω—É—Ç–∞','–º–∏–Ω—É—Ç—ã','–º–∏–Ω—É—Ç')} –∏ ${secs} ${plural(secs,'—Å–µ–∫—É–Ω–¥–∞','—Å–µ–∫—É–Ω–¥—ã','—Å–µ–∫—É–Ω–¥')}.`;
    }

    // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≥–æ–¥–æ–º
    (function initSubtitle() {
      const y = target.getFullYear();
      sub.innerHTML = `–°—á–∏—Ç–∞–µ–º –¥–æ –ø–æ–ª—É–Ω–æ—á–∏ 1&nbsp;–Ω–æ—è–±—Ä—è <strong>${y}</strong> –≥–æ–¥–∞ (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞).`;
    })();

    update();
    // –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑ –≤ 1 —Å–µ–∫—É–Ω–¥—É
    const timerId = setInterval(() => {
      update();
      // –ï—Å–ª–∏ –ø—Ä–æ—à–ª–∏ —Ü–µ–ª—å ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
      if (new Date() >= target) clearInterval(timerId);
    }, 1000);
  </script>
</body>
</html>
